---
title: "Como a distor√ß√£o idade-s√©rie e o abandono escolar afetam a taxa de aprova√ß√£o"
date: "2025-11-01"
output:
  html_document:
    theme: flatly
    toc: false
    toc_float: false
    df_print: paged
    code_folding: show
    includes:
      in_header: estilo.css
      after_body: tabs.js
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

<div style="
  background: #ffffff;
  padding: 30px;
  margin: 40px auto;
  max-width: 1100px;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.12);
  transition: box-shadow 0.3s ease;
">

# {.tabset .tabset-pills} 

## Introdu√ß√£o {.tabset}

### Introdu√ß√£o
=======
## Baixando a Base de dados teste

```{r}
rm(list=ls())
```
## Tratando os dados

```{r Fun√ß√£o para tratar rendimento}

limpar_inep_rendimento <- function(arquivo) {
  
  # Ler arquivo pulando cabe√ßalhos decorativos
  df <- read_excel(arquivo, skip = 9, col_names = FALSE)
  
  # Criar nomes das colunas conforme estrutura oficial
  nomes <- c(
    "ano", "unidade_geografica", "localizacao", "dependencia_administrativa",
    
    # Aprova√ß√£o EF
    paste0("aprov_fund_", c(
      "total", "anos_iniciais", "anos_finais",
      "1ano","2ano","3ano","4ano","5ano","6ano","7ano","8ano","9ano"
    )),
    
    # Aprova√ß√£o EM
    paste0("aprov_med_", c("total","1serie","2serie","3serie","4serie","nao_seriado")),
    
    # Reprova√ß√£o EF
    paste0("reprov_fund_", c(
      "total", "anos_iniciais", "anos_finais",
      "1ano","2ano","3ano","4ano","5ano","6ano","7ano","8ano","9ano"
    )),
    
    # Reprova√ß√£o EM
    paste0("reprov_med_", c("total","1serie","2serie","3serie","4serie","nao_seriado")),
    
    # Abandono EF
    paste0("aband_fund_", c(
      "total", "anos_iniciais", "anos_finais",
      "1ano","2ano","3ano","4ano","5ano","6ano","7ano","8ano","9ano"
    )),
    
    # Abandono EM
    paste0("aband_med_", c("total","1serie","2serie","3serie","4serie","nao_seriado"))
  )
  
  # Aplicar nomes
  colnames(df) <- nomes
  
  # Tratamento de dados
  df <- df %>%
    mutate(across(where(is.character), ~ gsub(",", ".", .))) %>%  # v√≠rgula ‚Üí ponto
    mutate(across(everything(), ~ na_if(., "--"))) %>%            # "--" ‚Üí NA
    mutate(across(everything(), ~ na_if(., ""))) %>%              # "" ‚Üí NA
    mutate(across(-c(ano, unidade_geografica, localizacao, dependencia_administrativa),
                  ~ suppressWarnings(as.numeric(.))))              # converter n√∫meros
  
  return(df)
}


```



```{r Fun√ß√£o para tratar distor√ß√£o}

limpar_inep_distorcao <- function(arquivo) {
  
  df <- read_excel(arquivo, skip = 9, col_names = FALSE)
  
  nomes <- c(
    "ano", "unidade_geografica", "localizacao", "dependencia_administrativa",
    
    # TDI ‚Äì Ensino Fundamental
    paste0("tdi_fund_", c(
      "total","anos_iniciais","anos_finais",
      "1ano","2ano","3ano","4ano","5ano",
      "6ano","7ano","8ano","9ano"
    )),
    
    # TDI ‚Äì Ensino M√©dio
    paste0("tdi_med_", c("total","1serie","2serie","3serie","4serie"))
  )
  
  colnames(df) <- nomes
  
  df <- df %>%
    mutate(across(where(is.character), ~ gsub(",", ".", .))) %>%
    mutate(across(everything(), ~ na_if(., "--"))) %>%
    mutate(across(everything(), ~ na_if(., ""))) %>%
    mutate(across(-c(ano, unidade_geografica, localizacao, dependencia_administrativa),
                  ~ suppressWarnings(as.numeric(.))))
  
  return(df)
}


```


```{r Baixando dados}

library(readxl)
library(dplyr)
library(purrr)
library(janitor)

caminho <- "C:/Users/carlo/Downloads/data"

arquivos <- list(
  rendimento_2022 = file.path(caminho, "tx_rend_brasil_regioes_ufs_2022.xlsx"),
  rendimento_2023 = file.path(caminho, "tx_rend_brasil_regioes_ufs_2023.xlsx"),
  rendimento_2024 = file.path(caminho, "tx_rend_brasil_regioes_ufs_2024.xlsx"),
  
  distorcao_2022 = file.path(caminho, "TDI_BRASIL_REGIOES_UFS_2022.xlsx"),
  distorcao_2023 = file.path(caminho, "TDI_BRASIL_REGIOES_UFS_2023.xlsx"),
  distorcao_2024 = file.path(caminho, "TDI_BRASIL_REGIOES_UFS_2024.xlsx")
)

dados <- map(arquivos, ~ read_excel(.x) %>% clean_names())

names(dados) <- names(arquivos)

```

```{r Fun√ß√£o de tratamento}

dados <- map2(
  names(arquivos),
  arquivos,
  function(nm, arq) {
    if (grepl("rendimento", nm)) {
      limpar_inep_rendimento(arq)
    } else {
      limpar_inep_distorcao(arq)
    }
  }
) %>% set_names(names(arquivos))


```


```{r Unido data frames}

# Rendimento (2022‚Äì2024)
rendimento <- bind_rows(
  dados$rendimento_2022 %>% mutate(ano = 2022),
  dados$rendimento_2023 %>% mutate(ano = 2023),
  dados$rendimento_2024 %>% mutate(ano = 2024)
)

# Distor√ß√£o idade-s√©rie
distorcao <- bind_rows(
  dados$distorcao_2022 %>% mutate(ano = 2022),
  dados$distorcao_2023 %>% mutate(ano = 2023),
  dados$distorcao_2024 %>% mutate(ano = 2024)
)

```

```{r Unindo dataframes}

# --- 1. Unir os datasets j√° tratados ---
rendimento$origem <- "rendimento"
distorcao$origem <- "distorcao"

# Garantir que ano, localiza√ß√£o, unidade, depend√™ncia existam em ambos
chaves <- c("ano","unidade_geografica","localizacao","dependencia_administrativa")

# Selecionar s√≥ vari√°veis importantes
rend_key <- rendimento %>% select(any_of(chaves),
                                  starts_with("aprov"),
                                  starts_with("reprov"),
                                  starts_with("aband"))

dist_key <- distorcao %>% select(any_of(chaves),
                                  starts_with("tdi"))

# --- 2. Juntar (inner_join garante alinhamento perfeito entre bases) ---
base_final <- rend_key %>%
  inner_join(dist_key, by = chaves)

glimpse(base_final)

```

```{r vari√°veis centrais para an√°lise}

base_final <- base_final %>%
  mutate(
    # Indicadores combinados
    distorcao_total = rowMeans(select(., tdi_fund_total, tdi_med_total), na.rm = TRUE),
    abandono_total  = rowMeans(select(., aband_fund_total, aband_med_total), na.rm = TRUE),
    aprovacao_total = rowMeans(select(., aprov_fund_total, aprov_med_total), na.rm = TRUE)
  )

```


```{r}

limpar_inep_rendimento <- function(arquivo) {
  
  # Agora pulando exatamente as 8 linhas corretas
  df <- read_excel(arquivo, skip = 8, col_names = TRUE)
  
  # Limpa nomes autom√°ticos
  df <- clean_names(df)
  
  # Troca v√≠rgulas por pontos apenas onde necess√°rio
  df <- df %>%
    mutate(across(where(is.character), ~ gsub(",", ".", .)))
  
  # Converte as colunas num√©ricas (mantendo 4 primeiras como texto)
  df <- df %>% 
    mutate(across(
      -c(1:4),
      ~ suppressWarnings(as.numeric(.))
    ))
  
  return(df)
}

limpar_inep_distorcao <- function(arquivo) {
  
  df <- read_excel(arquivo, skip = 8, col_names = TRUE)
  
  df <- clean_names(df)
  
  df <- df %>%
    mutate(across(where(is.character), ~ gsub(",", ".", .)))
  
  df <- df %>%
    mutate(across(
      -c(1:4),
      ~ suppressWarnings(as.numeric(.))
    ))
  
  return(df)
}

```

## An√°lise de correla√ß√µes

```{r An√°lise 1}

library(dplyr)

correlacoes <- base_final %>% 
  select(aprovacao_total, distorcao_total, abandono_total)

as.data.frame(cor(correlacoes, use = "complete.obs"))


```


## üß™ Metodologia
>>>>>>> a26ce53359691bd119c42299c9e00915d33d18b1

<hr style="height: 1px; background: #000;">

A educa√ß√£o brasileira carrega, ao longo de d√©cadas, desafios estruturais que impactam diretamente o futuro de milh√µes de estudantes. Entre esses desafios, dois se destacam pela intensidade com que afetam a trajet√≥ria escolar: a distor√ß√£o idade-s√©rie ‚Äî quando o estudante est√° em uma s√©rie incompat√≠vel com sua idade ‚Äî e o abandono escolar, fen√¥meno que interrompe o direito √† educa√ß√£o e compromete oportunidades futuras.

Ambos os indicadores se conectam profundamente √† desigualdade social, ao acesso desigual a pol√≠ticas p√∫blicas e √†s condi√ß√µes socioecon√¥micas regionais. Em muitos contextos, a repet√™ncia e o atraso escolar funcionam como um ciclo que se retroalimenta: estudantes mais velhos, deslocados do grupo et√°rio, tendem a apresentar menor engajamento, maior exposi√ß√£o a riscos e maior probabilidade de abandonar a escola.

Neste trabalho, busco compreender como esses dois fen√¥menos ‚Äî distor√ß√£o idade-s√©rie e abandono escolar ‚Äî influenciam a taxa de aprova√ß√£o no Brasil, utilizando dados oficiais do INEP entre 2022 e 2024. Por meio de an√°lise estat√≠stica e visualiza√ß√£o de dados, investigamos padr√µes, rela√ß√µes e poss√≠veis implica√ß√µes para o sistema educacional brasileiro.

Meu objetivo n√£o √© apenas descrever n√∫meros, mas gerar reflex√£o sobre os fatores que moldam a perman√™ncia e o sucesso dos estudantes. Ao entender como essas vari√°veis se relacionam, contribu√≠mos para uma discuss√£o essencial: como garantir que mais alunos avancem em suas trajet√≥rias escolares com dignidade e qualidade? </br></br>

### Defini√ß√£o do problema e Justificativa sociopedag√≥gica

<hr style="height: 1px; background: #000;">

A reprova√ß√£o e o abandono escolar continuam sendo indicadores cr√≠ticos na educa√ß√£o b√°sica brasileira. Entretanto, esses fen√¥menos n√£o acontecem de forma isolada. Diversos estudos apontam que eles est√£o profundamente associados √† distor√ß√£o idade-s√©rie, situa√ß√£o em que o estudante acumula atrasos sucessivos que prejudicam seu aprendizado, sua motiva√ß√£o e seu v√≠nculo com a escola.

O problema central que investigamos √©:

Em que medida a distor√ß√£o idade-s√©rie e o abandono escolar explicam a varia√ß√£o nas taxas de aprova√ß√£o?

Justifica-se esta an√°lise porque:

- A distor√ß√£o idade-s√©rie funciona como um marcador de desigualdade educacional.

- O abandono escolar est√° associado a vulnerabilidades sociais e impactos econ√¥micos.

- A aprova√ß√£o escolar √© um dos principais indicadores de progress√£o e sucesso educacional.

- Entender as rela√ß√µes entre esses indicadores auxilia gestores, pesquisadores e escolas na cria√ß√£o de pol√≠ticas mais eficientes.

Al√©m disso, o per√≠odo analisado (2022‚Äì2024) √© particularmente relevante, pois marca a fase de recupera√ß√£o p√≥s-pandemia, quando o pa√≠s enfrentou picos de defasagem de aprendizagem e aumento nas desigualdades regionais. </br></br>

### Abordagem, metodologia e utilidade da an√°lise

<hr style="height: 1px; background: #000;">

A an√°lise proposta parte da seguinte declara√ß√£o de problema: entender como a distor√ß√£o idade-s√©rie e o abandono escolar influenciam a taxa de aprova√ß√£o no Brasil. Para abordar essa quest√£o, utilizo os microdados oficiais do INEP referentes aos indicadores educacionais de 2022 a 2024, incluindo informa√ß√µes desagregadas por depend√™ncia administrativa, localiza√ß√£o geogr√°fica e etapas de ensino. Esses dados foram previamente tratados, padronizados e consolidados em uma base unificada, garantindo consist√™ncia, comparabilidade e aus√™ncia de duplicidades.

A metodologia empregada combina an√°lise descritiva, estudos correlacionais e visualiza√ß√£o gr√°fica. Primeiro, foram calculados indicadores agregados de aprova√ß√£o, abandono e distor√ß√£o idade-s√©rie, permitindo observar tend√™ncias gerais. Em seguida, aplicou-se uma an√°lise de correla√ß√£o para verificar a dire√ß√£o e intensidade das rela√ß√µes entre as vari√°veis. Por fim, utilizaram-se gr√°ficos de dispers√£o e tend√™ncias para interpretar visualmente o comportamento dos fen√¥menos ao longo dos anos e entre diferentes grupos. Essa abordagem √© adequada porque permite identificar, de forma direta, se taxas mais elevadas de distor√ß√£o e abandono se associam a redu√ß√µes nas taxas de aprova√ß√£o ‚Äî oferecendo evid√™ncias estat√≠sticas e emp√≠ricas para sustentar conclus√µes.

Ao adotar essa t√©cnica, minha inten√ß√£o √© fornecer um diagn√≥stico claro que ajuda a responder total ou parcialmente o problema proposto. Embora a correla√ß√£o n√£o determine causalidade, ela revela padr√µes consistentes que sugerem onde pol√≠ticas p√∫blicas ou a√ß√µes de gest√£o podem ser mais efetivas. A combina√ß√£o de estat√≠sticas descritivas e correla√ß√µes permite mapear fragilidades do sistema educacional e identificar grupos mais vulner√°veis a reprova√ß√£o e abandono.

Essa an√°lise tamb√©m tem utilidade pr√°tica para potenciais ‚Äúclientes‚Äù ‚Äî como gestores escolares, secretarias de educa√ß√£o, pesquisadores e formuladores de pol√≠ticas p√∫blicas. Os resultados ajudam a:

- identificar fatores que mais pressionam a taxa de aprova√ß√£o;

- priorizar regi√µes, redes ou etapas de ensino que exigem interven√ß√£o imediata;

- compreender como distor√ß√£o e abandono caminham juntos e afetam o desempenho;

- embasar decis√µes com evid√™ncias, evitando achismos;

- orientar aloca√ß√£o de recursos, forma√ß√£o docente e pol√≠ticas de perman√™ncia.

Com isso, a an√°lise n√£o apenas descreve o cen√°rio educacional brasileiro, mas contribui para a formula√ß√£o de estrat√©gias mais eficientes, voltadas √† redu√ß√£o da desigualdade e √† melhoria da qualidade da educa√ß√£o. </br></br>

## Pacotes utilizados {.tabset}

### Descri√ß√£o utilizados

<hr style="height: 1px; background: #000;">

Todos os pacotes necess√°rios para a an√°lise foram carregados antecipadamente com o objetivo de garantir transpar√™ncia, reprodutibilidade e facilidade de replica√ß√£o dos resultados. Ao explicitar previamente as depend√™ncias do projeto, qualquer leitor, avaliador ou pesquisador pode instalar as mesmas bibliotecas e reproduzir o processamento de dados e as an√°lises estat√≠sticas sem inconsist√™ncias ou incompatibilidades. </br></br>

### Prop√≥sito de cada pacote utilizado

<hr style="height: 1px; background: #000;">

1. readxl

- Permite importar arquivos Excel (.xlsx) diretamente para o R.

- Fundamental porque os indicadores educacionais do INEP s√£o fornecidos exatamente nesse formato.</br></br>

2. dplyr

- Pacote central para manipula√ß√£o e transforma√ß√£o de dados.

- Usado para selecionar colunas, filtrar linhas, criar novas vari√°veis, agrupar dados e sumarizar resultados.</br></br>

3. tidyr

- Auxilia na organiza√ß√£o dos dados, especialmente em tarefas de pivotar colunas, normalizar estruturas e tratar bases ‚Äúlargas‚Äù ou ‚Äúlongas‚Äù.</br></br>

4. stringr

- Conjunto de fun√ß√µes para manipula√ß√£o de texto (strings).

- Essencial para ajustar nomes de vari√°veis, extrair anos dos nomes de arquivos e padronizar categorias.</br></br>

5. purrr

- Facilita opera√ß√µes repetidas com listas e fun√ß√µes, como aplicar automaticamente fun√ß√µes de limpeza em v√°rios arquivos do INEP.</br></br>

6. janitor

- padronizar nomes das colunas (clean_names()),

- remover linhas vazias ou duplicadas,

- facilitar inspe√ß√µes iniciais da base.</br></br>

7. ggplot2

- Principal biblioteca de visualiza√ß√£o de dados no R.

- Utilizado para gerar gr√°ficos de correla√ß√£o, dispers√£o e tend√™ncias temporais.</br></br>

## Fonte dos Dados {.tabset}

### Fonte Principal

<hr style="height: 1px; background: #000;">

Todos os dados utilizados neste projeto est√£o dispon√≠veis publicamente no portal do INEP, na √°rea de dados abertos.

Link para fonte dos dados: 
<a href="https://www.gov.br/inep/pt-br/acesso-a-informacao/dados-abertos/indicadores-educacionais" target="_blank">
    INEP ‚Äì Indicadores Educacionais
</a>
<br><br>


### Descri√ß√£o e Prepara√ß√£o dos Dados

<hr style="height: 1px; background: #000;">

Os dados utilizados neste projeto foram obtidos no portal de Dados Abertos do Instituto Nacional de Estudos e Pesquisas Educacionais An√≠sio Teixeira (INEP), que publica anualmente indicadores oficiais da Educa√ß√£o B√°sica. O prop√≥sito original dessas bases √© monitorar o desempenho e condi√ß√µes do fluxo escolar, permitindo que gestores, pesquisadores e o p√∫blico geral acompanhem:

- Taxas de aprova√ß√£o, reprova√ß√£o e abandono escolar

- Indicadores de distor√ß√£o idade-s√©rie

- Resultados desagregados por ano, unidade da federa√ß√£o, localiza√ß√£o (urbana/rural) e depend√™ncia administrativa (Federal, Estadual, Municipal)

As bases utilizadas correspondem aos anos 2022, 2023 e 2024, sendo disponibilizadas pelo INEP j√° em formato de planilha Excel (.xlsx). Cada arquivo cont√©m m√∫ltiplas se√ß√µes e cabe√ßalhos extensos, pois foram originalmente organizados para leitura humana, n√£o para an√°lise autom√°tica. Assim, foi necess√°rio um processo consistente de limpeza.

Os dados originais possu√≠am:

- V√°rias linhas de cabe√ßalho decorativo (identifica√ß√£o do INEP, t√≠tulo da tabela, explica√ß√µes metodol√≥gicas).

- Aus√™ncia de nomes claros para as colunas, exigindo cria√ß√£o manual.

- Uso de v√≠rgula no padr√£o brasileiro (‚Äú95,3‚Äù), necessitando convers√£o para ponto decimal.

- Valores ausentes representados por "--", c√©lulas vazias ou zeros artificiais, dependendo do indicador.

O volume de vari√°veis variava entre arquivos, mas cada tabela continha aproximadamente:

- 4 vari√°veis categ√≥ricas (ano, UF/regi√£o, localiza√ß√£o, depend√™ncia administrativa)

- +38 a 60 vari√°veis num√©ricas, dependendo do tipo (rendimento ou distor√ß√£o)

Essas caracter√≠sticas tornam essas bases t√≠picas de dados governamentais brutos: completos, por√©m n√£o imediatamente adequados para an√°lise computacional. </br></br>

## Tratando os dados {.tabset}

### Fun√ß√£o limpar_inep_rendimento

<hr style="height: 1px; background: #000;">

```{r Fun√ß√£o para tratar rendimento}

limpar_inep_rendimento <- function(arquivo) {
  
  # Ler arquivo pulando cabe√ßalhos decorativos
  df <- read_excel(arquivo, skip = 9, col_names = FALSE)
  
  # Criar nomes das colunas conforme estrutura oficial
  nomes <- c(
    "ano", "unidade_geografica", "localizacao", "dependencia_administrativa",
    
    # Aprova√ß√£o EF
    paste0("aprov_fund_", c(
      "total", "anos_iniciais", "anos_finais",
      "1ano","2ano","3ano","4ano","5ano","6ano","7ano","8ano","9ano"
    )),
    
    # Aprova√ß√£o EM
    paste0("aprov_med_", c("total","1serie","2serie","3serie","4serie","nao_seriado")),
    
    # Reprova√ß√£o EF
    paste0("reprov_fund_", c(
      "total", "anos_iniciais", "anos_finais",
      "1ano","2ano","3ano","4ano","5ano","6ano","7ano","8ano","9ano"
    )),
    
    # Reprova√ß√£o EM
    paste0("reprov_med_", c("total","1serie","2serie","3serie","4serie","nao_seriado")),
    
    # Abandono EF
    paste0("aband_fund_", c(
      "total", "anos_iniciais", "anos_finais",
      "1ano","2ano","3ano","4ano","5ano","6ano","7ano","8ano","9ano"
    )),
    
    # Abandono EM
    paste0("aband_med_", c("total","1serie","2serie","3serie","4serie","nao_seriado"))
  )
  
  # Aplicar nomes
  colnames(df) <- nomes
  
  # Tratamento de dados
  df <- df %>%
    mutate(across(where(is.character), ~ gsub(",", ".", .))) %>%  # v√≠rgula ‚Üí ponto
    mutate(across(everything(), ~ na_if(., "--"))) %>%            # "--" ‚Üí NA
    mutate(across(everything(), ~ na_if(., ""))) %>%              # "" ‚Üí NA
    mutate(across(-c(ano, unidade_geografica, localizacao, dependencia_administrativa),
                  ~ suppressWarnings(as.numeric(.))))              # converter n√∫meros
  
  return(df)
}


```

Esta fun√ß√£o realiza o tratamento das planilhas de rendimento do INEP, que possuem v√°rias linhas de cabe√ßalhos decorativos e valores inconsistentes.
Primeiro ignoramos as linhas iniciais e aplicamos nomes padronizados √†s colunas, garantindo que cada indicador (aprova√ß√£o, reprova√ß√£o e abandono por s√©rie e n√≠vel de ensino) seja identificado corretamente.
Em seguida, substitu√≠mos v√≠rgulas por pontos, convertemos valores inv√°lidos ("--", strings vazias) em NA e transformamos as colunas num√©ricas para permitir an√°lises estat√≠sticas confi√°veis.</br></br>

### Ap√≥s a Fun√ß√£o limpar_inep_distorcao

<hr style="height: 1px; background: #000;">

```{r Fun√ß√£o para tratar distor√ß√£o}

limpar_inep_distorcao <- function(arquivo) {
  
  df <- read_excel(arquivo, skip = 9, col_names = FALSE)
  
  nomes <- c(
    "ano", "unidade_geografica", "localizacao", "dependencia_administrativa",
    
    # TDI ‚Äì Ensino Fundamental
    paste0("tdi_fund_", c(
      "total","anos_iniciais","anos_finais",
      "1ano","2ano","3ano","4ano","5ano",
      "6ano","7ano","8ano","9ano"
    )),
    
    # TDI ‚Äì Ensino M√©dio
    paste0("tdi_med_", c("total","1serie","2serie","3serie","4serie"))
  )
  
  colnames(df) <- nomes
  
  df <- df %>%
    mutate(across(where(is.character), ~ gsub(",", ".", .))) %>%
    mutate(across(everything(), ~ na_if(., "--"))) %>%
    mutate(across(everything(), ~ na_if(., ""))) %>%
    mutate(across(-c(ano, unidade_geografica, localizacao, dependencia_administrativa),
                  ~ suppressWarnings(as.numeric(.))))
  
  return(df)
}


```

Esta fun√ß√£o segue a mesma l√≥gica da anterior, mas aplicada √†s planilhas de distor√ß√£o idade-s√©rie.
Ap√≥s ignorar os cabe√ßalhos decorativos, atribu√≠mos nomes coerentes √†s colunas (TDI no EF e EM), padronizamos valores, tratamos aus√™ncias e convertemos os indicadores para formato num√©rico.
Isso garante que os dados de TDI fiquem organizados e consistentes para integra√ß√£o com as demais bases.</br></br>

### Ap√≥s o Bloco que Importa os Dados

<hr style="height: 1px; background: #000;">

```{r Baixando dados, warning=FALSE, message=FALSE}

library(readxl)
library(dplyr)
library(purrr)
library(janitor)

caminho <- "C:/Users/carlo/Downloads/data"

arquivos <- list(
  rendimento_2022 = file.path(caminho, "tx_rend_brasil_regioes_ufs_2022.xlsx"),
  rendimento_2023 = file.path(caminho, "tx_rend_brasil_regioes_ufs_2023.xlsx"),
  rendimento_2024 = file.path(caminho, "tx_rend_brasil_regioes_ufs_2024.xlsx"),
  
  distorcao_2022 = file.path(caminho, "TDI_BRASIL_REGIOES_UFS_2022.xlsx"),
  distorcao_2023 = file.path(caminho, "TDI_BRASIL_REGIOES_UFS_2023.xlsx"),
  distorcao_2024 = file.path(caminho, "TDI_BRASIL_REGIOES_UFS_2024.xlsx")
)

dados <- map(arquivos, ~ read_excel(.x) %>% clean_names())

names(dados) <- names(arquivos)

```

Aqui apenas organizamos os caminhos dos arquivos e realizamos uma leitura inicial.
Esse passo cria uma estrutura clara e reproduz√≠vel para acessar todas as planilhas do INEP antes do tratamento definitivo.</br></br>

### Ap√≥s o Bloco que Aplica as Fun√ß√µes de Tratamento

<hr style="height: 1px; background: #000;">

```{r Fun√ß√£o de tratamento, warning=FALSE, message=FALSE}

dados <- map2(
  names(arquivos),
  arquivos,
  function(nm, arq) {
    if (grepl("rendimento", nm)) {
      limpar_inep_rendimento(arq)
    } else {
      limpar_inep_distorcao(arq)
    }
  }
) %>% set_names(names(arquivos))


```

Utilizamos map2() para aplicar automaticamente a fun√ß√£o correta (rendimento ou distor√ß√£o) a cada arquivo.
Isso padroniza o processo de limpeza para todos os anos (2022‚Äì2024) e assegura que todas as planilhas sejam tratadas da mesma maneira, eliminando inconsist√™ncias.</br></br>

### Ap√≥s Unir os Data Frames (bind_rows)

<hr style="height: 1px; background: #000;">

```{r Unido data frames}

# Rendimento (2022‚Äì2024)
rendimento <- bind_rows(
  dados$rendimento_2022 %>% mutate(ano = 2022),
  dados$rendimento_2023 %>% mutate(ano = 2023),
  dados$rendimento_2024 %>% mutate(ano = 2024)
)

# Distor√ß√£o idade-s√©rie
distorcao <- bind_rows(
  dados$distorcao_2022 %>% mutate(ano = 2022),
  dados$distorcao_2023 %>% mutate(ano = 2023),
  dados$distorcao_2024 %>% mutate(ano = 2024)
)

```

Neste passo consolidamos os dados de cada ano em duas grandes bases: rendimento e distor√ß√£o.
A uni√£o por ano permite an√°lises comparativas, tend√™ncias e agrega√ß√£o dos indicadores ao longo do tempo.</br></br>

###  Ap√≥s o inner_join() (base_final)

<hr style="height: 1px; background: #000;">

```{r Unindo dataframes,  warning=FALSE}
# --- 1. Unir os datasets j√° tratados ---
rendimento$origem <- "rendimento"
distorcao$origem <- "distorcao"

# Garantir que ano, localiza√ß√£o, unidade, depend√™ncia existam em ambos
chaves <- c("ano","unidade_geografica","localizacao","dependencia_administrativa")

# Selecionar s√≥ vari√°veis importantes
rend_key <- rendimento %>% select(any_of(chaves),
                                  starts_with("aprov"),
                                  starts_with("reprov"),
                                  starts_with("aband"))

dist_key <- distorcao %>% select(any_of(chaves),
                                  starts_with("tdi"))

# --- 2. Juntar (inner_join garante alinhamento perfeito entre bases) ---
base_final <- rend_key %>%
  inner_join(dist_key, by = chaves)

glimpse(base_final)

```

Aqui unimos as duas bases tratadas utilizando vari√°veis comuns (ano, unidade, localiza√ß√£o e depend√™ncia).
O uso de inner_join garante que apenas combina√ß√µes v√°lidas e correspondentes sejam mantidas.
O resultado √© um dataset final completo, contendo simultaneamente aprova√ß√£o, abandono e distor√ß√£o para a mesma unidade de an√°lise.</br></br>

### Ap√≥s a Cria√ß√£o das Vari√°veis Centrais

<hr style="height: 1px; background: #000;">

```{r vari√°veis centrais para an√°lise}

base_final <- base_final %>%
  mutate(
    # Indicadores combinados
    distorcao_total = rowMeans(select(., tdi_fund_total, tdi_med_total), na.rm = TRUE),
    abandono_total  = rowMeans(select(., aband_fund_total, aband_med_total), na.rm = TRUE),
    aprovacao_total = rowMeans(select(., aprov_fund_total, aprov_med_total), na.rm = TRUE)
  )

```

Criamos tr√™s indicadores agregados principais ‚Äî aprova√ß√£o total, abandono total e distor√ß√£o total.
Eles sintetizam dezenas de vari√°veis em m√©tricas √∫nicas que representam o desempenho geral da educa√ß√£o.
Esses indicadores servem como base para toda a an√°lise estat√≠stica e gr√°fica do estudo.</br></br>

### Conjunto de Dados Final

<hr style="height: 1px; background: #000;">

```{r, message=FALSE, warning=FALSE}

# Mostrar 10 linhas e todas as colunas

head(base_final, 10)

```

## An√°lises {.tabset}

### Principais Estat√≠sticas

<hr style="height: 1px; background: #000;">

```{r}

library(dplyr)

resumo_variaveis <- base_final %>%
  summarise(
    across(
      c(aprovacao_total, abandono_total, distorcao_total),
      list(media = ~mean(., na.rm = TRUE),
           mediana = ~median(., na.rm = TRUE),
           minimo = ~min(., na.rm = TRUE),
           maximo = ~max(., na.rm = TRUE),
           desvio_padrao = ~sd(., na.rm = TRUE))
    )
  )

resumo_variaveis

```

As estat√≠sticas mostram que a aprova√ß√£o m√©dia √© alta, enquanto abandono e distor√ß√£o variam mais entre regi√µes e redes. O desvio-padr√£o relativamente elevado da distor√ß√£o indica forte desigualdade entre unidades. Essas m√©tricas oferecem uma vis√£o geral do comportamento dos indicadores e ajudam a contextualizar padr√µes mais profundos.</br></br>

### An√°lise de Correla√ß√µes

<hr style="height: 1px; background: #000;">

```{r An√°lise 1}

library(dplyr)

correlacoes <- base_final %>% 
  select(aprovacao_total, distorcao_total, abandono_total)

as.data.frame(cor(correlacoes, use = "complete.obs"))


```

A an√°lise de correla√ß√£o revela rela√ß√µes claras:

- Aprova√ß√£o √ó Distor√ß√£o: rela√ß√£o negativa moderada (cerca de ‚Äì0.67).

- Aprova√ß√£o √ó Abandono: rela√ß√£o negativa forte (aprox. ‚Äì0.79).

- Distor√ß√£o √ó Abandono: rela√ß√£o positiva significativa (aprox. +0.70).

Esses resultados indicam que quanto maior a distor√ß√£o e o abandono, menor tende a ser a taxa de aprova√ß√£o.</br></br>

### Tabelas Resumo (por ano, UF, localiza√ß√£o, depend√™ncia)

<hr style="height: 1px; background: #000;">

```{r Tabela Resumo, warning=FALSE}

tabela_resumo <- base_final %>%
  group_by(ano, unidade_geografica, localizacao) %>%
  summarise(
    media_aprov = mean(aprovacao_total, na.rm = TRUE),
    media_aband = mean(abandono_total, na.rm = TRUE),
    media_tdi   = mean(distorcao_total, na.rm = TRUE),
    .groups = "drop"
  )
tabela_resumo

```

Os resumos por grupo mostram desigualdades persistentes: redes rurais e algumas UFs mant√™m maiores n√≠veis de distor√ß√£o e abandono, enquanto regi√µes urbanas e federais apresentam melhores taxas de aprova√ß√£o. Essas varia√ß√µes ajudam a identificar grupos e contextos priorit√°rios.</br></br>

### Distor√ß√£o vs Aprova√ß√£o

<hr style="height: 1px; background: #000;">

```{r, warning=FALSE, message=FALSE}

library(ggplot2)

ggplot(base_final, aes(x = distorcao_total, y = aprovacao_total, color = localizacao)) +
  geom_point(alpha = 0.7) +
  geom_smooth(method = "lm", se = FALSE) +
  labs(
    title = "Rela√ß√£o entre Distor√ß√£o Idade-S√©rie e Taxa de Aprova√ß√£o",
    x = "Distor√ß√£o Idade-S√©rie (%)",
    y = "Taxa de Aprova√ß√£o (%)"
  )

```

O gr√°fico evidencia uma tend√™ncia decrescente: unidades com maior distor√ß√£o idade-s√©rie apresentam sistematicamente menores taxas de aprova√ß√£o. A linha de regress√£o confirma essa rela√ß√£o negativa.</br></br>

### Abandono vs Aprova√ß√£o

<hr style="height: 1px; background: #000;">

```{r, warning=FALSE, message=FALSE}

ggplot(base_final, aes(x = abandono_total, y = aprovacao_total)) +
  geom_point(alpha = 0.6, color = "darkred") +
  geom_smooth(method = "lm", color = "black") +
  labs(
    title = "Rela√ß√£o entre Abandono Escolar e Taxa de Aprova√ß√£o",
    x = "Taxa de abandono (%)",
    y = "Taxa de aprova√ß√£o (%)"
  ) +
  theme_minimal()

```

H√° uma clara queda na aprova√ß√£o conforme o abandono escolar cresce. A dispers√£o mostra que mesmo pequenos aumentos no abandono est√£o associados a redu√ß√µes percept√≠veis na aprova√ß√£o.</br></br>

### Distor√ß√£o vs Abandono

<hr style="height: 1px; background: #000;">

```{r, warning=FALSE, message=FALSE}
ggplot(base_final, aes(x = distorcao_total, y = abandono_total)) +
  geom_point(alpha = 0.6, color = "steelblue") +
  geom_smooth(method = "lm", color = "black") +
  labs(
    title = "Rela√ß√£o entre Distor√ß√£o Idade-S√©rie e Abandono Escolar",
    x = "Distor√ß√£o idade-s√©rie (%)",
    y = "Abandono escolar (%)"
  ) +
  theme_minimal()

```

A rela√ß√£o positiva indica que escolas e redes com maior distor√ß√£o idade-s√©rie tamb√©m tendem a apresentar maior abandono. Isso refor√ßa a ideia de que atraso escolar e desist√™ncia fazem parte de um mesmo ciclo de exclus√£o.</br></br>

## Conclus√£o {.tabset}

<hr style="height: 1px; background: #000;">

A an√°lise dos indicadores educacionais brasileiros entre 2022 e 2024 mostra de forma consistente que a distor√ß√£o idade-s√©rie e o abandono escolar exercem influ√™ncia direta e negativa sobre a taxa de aprova√ß√£o. Os resultados revelam tr√™s padr√µes principais: (1) quanto maior a distor√ß√£o idade-s√©rie, menor tende a ser a aprova√ß√£o; (2) quanto maior o abandono, menor a aprova√ß√£o; e (3) distor√ß√£o e abandono caminham juntos, refor√ßando mutuamente seus efeitos sobre o fluxo escolar. Essa din√¢mica ficou evidente nas correla√ß√µes encontradas: a aprova√ß√£o apresenta correla√ß√µes negativas tanto com a distor√ß√£o (r = ‚Äì0.67) quanto com o abandono (r = ‚Äì0.79), enquanto distor√ß√£o e abandono possuem correla√ß√£o positiva significativa (r = 0.70).

Do ponto de vista educacional, os resultados indicam que o fracasso escolar n√£o se distribui de forma isolada: ele se acumula e se amplifica ao longo do tempo. Estudantes com atraso escolar enfrentam maiores barreiras de aprendizagem, maior probabilidade de reprova√ß√£o e, como consequ√™ncia, maior risco de abandono. Esses fatores reduzem diretamente a taxa de aprova√ß√£o, criando um ciclo prolongado de exclus√£o educacional ‚Äî especialmente em contextos mais vulner√°veis. Assim, os achados refor√ßam a necessidade de pol√≠ticas p√∫blicas voltadas √† corre√ß√£o de fluxo, monitoramento preventivo do abandono, recupera√ß√£o de aprendizagem, e interven√ß√µes direcionadas a grupos espec√≠ficos (como redes rurais e estaduais).

Em s√≠ntese, entender essas rela√ß√µes n√£o apenas esclarece o funcionamento dos indicadores educacionais, mas tamb√©m contribui para a constru√ß√£o de um diagn√≥stico s√≥lido que pode orientar gestores, escolas e pesquisadores na formula√ß√£o de a√ß√µes eficazes para melhorar o desempenho e promover maior equidade no sistema educacional brasileiro. </br></br>
</div>